google.charts.load("current",{packages:["corechart","bar","gauge","scatter"]});var wpDataTablesGoogleChart=function(){var t={rows:[],columns:[],type:"column",containerId:"google-chart-container",columnIndexes:[],connectedWPDataTable:null,chart:null,googleDataTable:null,renderCallback:null,options:{animation:"none",backgroundColor:{fill:"#FFFFFF",strokeWidth:0,stroke:"#666",rx:0},chartArea:{backgroundColor:{}},crosshair:{},height:400,legend:{position:"right"},orientation:"horizontal",titlePosition:"out",tooltip:{trigger:"none"},vAxis:{direction:1,viewWindow:{}}},setRows:function(t){this.rows=t},enableDateTimeAxis:function(){this.options.hAxis.gridlines={count:-1,units:{days:{format:["MMM dd"]},hours:{format:["HH:mm","ha"]}}}},detectDates:function(){for(var t in this.columns)if("date"==this.columns[t].type||"datetime"==this.columns[t].type)for(var o in this.rows){var i=Date.parse(this.rows[o][t]);if(isNaN(i))this.rows[o][t]=new Date;else if(this.rows[o][t]=new Date(i),null==this.connectedWPDataTable){var e=this.rows[o][t].getTime();"datetime"==this.columns[t].type&&(e+=60*this.rows[o][t].getTimezoneOffset()*1e3),this.rows[o][t].setTime(e)}else this.rows[o][t].setTime(this.rows[o][t].getTime());"datetime"==this.columns[t].type&&this.enableDateTimeAxis()}},setColumns:function(t){this.columns=t},getColumns:function(){return this.columns},setOptions:function(o){for(var i in o)"responsive_width"!=i||"1"!=o[i]?this.options[i]=o[i]:(t.options.animation=!1,jQuery(window).resize(function(){t.chart.draw(t.googleDataTable,t.options)}))},getOptions:function(){return this.options},setType:function(t){this.type=t},getType:function(){return this.type},setContainer:function(t){this.containerId=t},getContainer:function(){return this.containerId},setRenderCallback:function(t){this.renderCallback=t},render:function(){for(var t in this.googleDataTable=new google.visualization.DataTable,this.columns)this.googleDataTable.addColumn(this.columns[t]);switch(this.detectDates(),this.googleDataTable.addRows(this.rows),this.type){case"google_column_chart":this.chart=new google.visualization.ColumnChart(document.getElementById(this.containerId));break;case"google_line_chart":this.chart=new google.visualization.LineChart(document.getElementById(this.containerId));break;case"google_pie_chart":this.chart=new google.visualization.PieChart(document.getElementById(this.containerId))}null!==this.renderCallback&&this.renderCallback(this),this.chart.draw(this.googleDataTable,this.options)},refresh:function(){if(void 0!==google.visualization.DataTable&&null!=this.chart){for(var t in this.googleDataTable=new google.visualization.DataTable,this.columns)this.googleDataTable.addColumn(this.columns[t]);this.detectDates(),this.googleDataTable.addRows(this.rows),null!==this.renderCallback&&this.renderCallback(this),this.chart.draw(this.googleDataTable,this.options)}},setChartConfig:function(o){1==o.responsive_width?(this.options.animation=!1,delete this.options.width,jQuery(window).resize(function(){t.chart.draw(t.googleDataTable,t.options)})):this.options.width=o.width,o.height&&(this.options.height=o.height),this.options.backgroundColor.fill=o.background_color,o.border_width&&(this.options.backgroundColor.strokeWidth=o.border_width),this.options.backgroundColor.stroke=o.border_color,o.border_radius&&(this.options.backgroundColor.rx=o.border_radius),o.border_radius&&(this.options.backgroundColor.rx=o.border_radius),this.options.chartArea.backgroundColor.fill=o.plot_background_color,o.plot_border_width&&(this.options.chartArea.backgroundColor.strokeWidth=o.plot_border_width),this.options.chartArea.backgroundColor.stroke=o.plot_border_color;var i=0;for(var e in o.series_data)this.columns[i+1].label=o.series_data[e].label,""!=o.series_data[e].color&&(this.options.series[i]={color:o.series_data[e].color}),i++;0==o.show_grid?(this.options.hAxis.gridlines={color:"transparent"},this.options.vAxis.gridlines={color:"transparent"}):(delete this.options.hAxis.gridlines,delete this.options.vAxis.gridlines),o.horizontal_axis_label&&(this.options.hAxis.title=o.horizontal_axis_label),o.vertical_axis_label&&(this.options.vAxis.title=o.vertical_axis_label),1==o.show_title?this.options.title=o.chart_title:this.options.title="",1==o.title_floating?this.options.titlePosition="in":this.options.titlePosition="out",this.options.tooltip.trigger="none",o.legend_position&&(this.options.legend.position=o.legend_position),"bottom"==o.legend_vertical_align?this.options.legend.alignment="end":"middle"==o.legend_vertical_align?this.options.legend.alignment="center":this.options.legend.alignment="start"},setColumnIndexes:function(t){this.columnIndexes=t},getColumnIndexes:function(){return this.columnIndexes}};return t};